/* 版面與主色系 */
:root { --bg:#2c2f33; --bg2:#23272a; --panel:#36393f; --brand:#5865f2; --brand2:#4f545c; --text:#fff; --muted:#ccc; }
*{box-sizing:border-box}
html,body{height:100%; overflow:hidden}
body { margin:0; background-color:var(--bg); font-family:'Segoe UI', "Microsoft JhengHei", sans-serif; color:var(--text); }

.app { display:grid; grid-template-columns:240px 1fr; height:100vh; }
.sidebar { background:var(--bg2); padding:12px; overflow:auto; border-right:1px solid #1f2225; }
.sidebar .brand { font-weight:700; margin-bottom:8px; opacity:.9; }
.userrow{padding:6px 8px; border-radius:6px; cursor:pointer}
.userrow:hover{background:#2b2f33}
.userrow.me{ color:#66b3ff; font-weight:700; }      /* 自己：藍色 */
.userrow.admin{ color:#ffd54a; font-weight:700; }  /* 管理員：亮黃 */
.userrow.banned{ color:#b71c1c; }                  /* 被封鎖：深紅（僅管理員看得到） */
.tag-admin{ font-size:12px; opacity:.9; margin-left:4px; }

.main { display:grid; grid-template-rows:auto 1fr auto; height:100vh; }
.topbar { display:flex; justify-content:space-between; align-items:center; padding:10px; border-bottom:1px solid #1f2225; background:var(--bg2); gap:8px; }
.topbar .right{display:flex; gap:6px; align-items:center}
.topbar input{background:#1e2124; border:1px solid #444; color:#fff; padding:6px 8px; border-radius:6px}
button{background:#7289da; color:#fff; border:none; padding:8px 10px; border-radius:6px; cursor:pointer}
button:hover{background:#5b6eae}
button.danger{background:#e02e2e}
button.danger:hover{background:#c22626}
.linklike{background:transparent; text-decoration:underline; cursor:pointer}

.banner{background:#3a3f45; border-left:4px solid #ffcc00; padding:6px 8px; border-radius:6px}
.hidden{display:none}

.chat-box { overflow-y:auto; padding:16px; display:flex; flex-direction:column; gap:10px; background:var(--bg); }
.input-area { display:flex; gap:6px; padding:10px; border-top:1px solid #1f2225; background:var(--bg2); }
.input-area input{flex:1; background:#1e2124; border:1px solid #444; color:#fff; padding:10px; border-radius:6px}

/* 泡泡訊息 */
.chat-message { display:flex; align-items:flex-end; }
.chat-message.self{ flex-direction:row-reverse; }
.bubble { background:var(--brand); padding:10px 14px; border-radius:12px; max-width:70%; position:relative; }
.chat-message.other .bubble { background:var(--brand2); }
.chat-message.self .bubble::after { content:""; position:absolute; right:-8px; top:12px; border:8px solid transparent; border-left-color:var(--brand); }
.chat-message.other .bubble::after { content:""; position:absolute; left:-8px; top:12px; border:8px solid transparent; border-right-color:var(--brand2); }
.bubble-head{display:flex; align-items:center; gap:6px; margin-bottom:6px}
.bubble-name{font-weight:700; opacity:.95; cursor:pointer}
.bubble-text{white-space:pre-wrap; word-break:break-word}
.bubble-time{font-size:12px; color:var(--muted); margin-top:6px; text-align:right}
.mention{color:#00aaff; font-weight:700}
.del-btn{background:#ff5555; padding:4px 8px; border-radius:6px; font-size:12px}

/* 使用者卡片 */
.popup { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:var(--bg2); border-radius:10px; padding:18px; box-shadow:0 0 12px #000; z-index:1000; min-width:260px }

/* 仍保留桌機固定排版，不做抽屜 */
@media (max-width: 820px) {
  .app{ grid-template-columns: 240px 1fr; }
}