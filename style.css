/* 版面與主色系 */
:root {
  --bg:#2c2f33; --bg2:#23272a; --panel:#36393f; --brand:#5865f2; --brand2:#4f545c; --text:#fff; --muted:#ccc;

  /* Scrollbar colors */
  --scroll-track: #1c1f22;
  --scroll-thumb: #3b4050;
  --scroll-thumb-hover: #596080;
  --scroll-thumb-active: #6b73a0;
}
*{box-sizing:border-box}
html,body{height:100%; overflow:hidden} /* ⬅ 固定版面高度，不讓整站上下捲動 */
body { margin:0; background-color:var(--bg); font-family:'Segoe UI', "Microsoft JhengHei", sans-serif; color:var(--text); }

.app { display:grid; grid-template-columns:240px 1fr; height:100vh; }

/* ===== Sidebar ===== */
.sidebar { background:var(--bg2); padding:12px; overflow:auto; border-right:1px solid #1f2225; }
.sidebar .brand { font-weight:700; margin-bottom:8px; opacity:.9; }
.userrow{padding:6px 8px; border-radius:6px; cursor:pointer}
.userrow:hover{background:#2b2f33}
.userrow.admin{ color:#ffd54a; font-weight:700; } /* ⬅ 管理員高亮（亮黃色） */

/* ===== Main ===== */
.main { display:grid; grid-template-rows:auto 1fr auto; height:100vh; }
.topbar { display:flex; justify-content:space-between; align-items:center; padding:10px; border-bottom:1px solid #1f2225; background:var(--bg2); gap:8px; }
.topbar .right{display:flex; gap:6px; align-items:center}
.topbar input{background:#1e2124; border:1px solid #444; color:#fff; padding:6px 8px; border-radius:6px}
button{background:#7289da; color:#fff; border:none; padding:8px 10px; border-radius:6px; cursor:pointer}
button:hover{background:#5b6eae}
button.danger{background:#e02e2e}
button.danger:hover{background:#c22626}
.linklike{background:transparent; text-decoration:underline; cursor:pointer}

.banner{background:#3a3f45; border-left:4px solid #ffcc00; padding:6px 8px; border-radius:6px}
.hidden{display:none}

/* ===== Chat box ===== */
.chat-box {
  overflow-y:auto;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
  background:var(--bg);

  /* 滑輪優化 */
  scrollbar-gutter: stable;           /* 減少顯示/隱藏滑輪時的版面跳動 */
  overscroll-behavior: contain;       /* 防止上/下拉牽動整頁 */
  scroll-behavior: smooth;            /* 平滑捲動 */
}

/* 下方輸入列 */
.input-area { display:flex; gap:6px; padding:10px; border-top:1px solid #1f2225; background:var(--bg2); }
.input-area input{flex:1; background:#1e2124; border:1px solid #444; color:#fff; padding:10px; border-radius:6px}

/* ===== 泡泡訊息 ===== */
.chat-message { display:flex; align-items:flex-end; }
.chat-message.self{ flex-direction:row-reverse; }
.bubble { background:var(--brand); padding:10px 14px; border-radius:12px; max-width:70%; position:relative; }
.chat-message.other .bubble { background:var(--brand2); }
.chat-message.self .bubble::after { content:""; position:absolute; right:-8px; top:12px; border:8px solid transparent; border-left-color:var(--brand); }
.chat-message.other .bubble::after { content:""; position:absolute; left:-8px; top:12px; border:8px solid transparent; border-right-color:var(--brand2); }
.bubble-head{display:flex; align-items:center; gap:6px; margin-bottom:6px}
.bubble-name{font-weight:700; opacity:.95; cursor:pointer}
.bubble-text{white-space:pre-wrap; word-break:break-word}
.bubble-time{font-size:12px; color:var(--muted); margin-top:6px; text-align:right}
.mention{color:#00aaff; font-weight:700}
.del-btn{background:#ff5555; padding:4px 8px; border-radius:6px; font-size:12px}

/* ===== 使用者卡片 ===== */
.popup { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:var(--bg2); border-radius:10px; padding:18px; box-shadow:0 0 12px #000; z-index:1000; min-width:260px }

/* ===== 響應式（手機抽屜效果移除，保持桌機版固定排版） ===== */
@media (max-width: 820px) {
  .app{ grid-template-columns: 240px 1fr; } /* 保持側欄存在，不做抽屜 */
}

/* =========================================================
   Custom Scrollbar (Chrome / Edge / Safari)
   目標：細、圓角、與主題一致；滑過加寬、按住更亮
   套用範圍：側欄與聊天區
   =========================================================*/
.sidebar::-webkit-scrollbar,
.chat-box::-webkit-scrollbar{
  width: 10px;              /* 寬版以利抓取 */
  height: 10px;
}
.sidebar:hover::-webkit-scrollbar,
.chat-box:hover::-webkit-scrollbar{
  width: 12px;              /* 滑過時微幅加寬，易用但不突兀 */
  height: 12px;
}
.sidebar::-webkit-scrollbar-track,
.chat-box::-webkit-scrollbar-track{
  background: var(--scroll-track);
  border-radius: 10px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
}
.sidebar::-webkit-scrollbar-thumb,
.chat-box::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, var(--scroll-thumb), #2f3344);
  border-radius: 10px;
  border: 2px solid transparent; /* 讓 thumb 與 track 之間有縫隙感 */
  background-clip: padding-box;
}
.sidebar:hover::-webkit-scrollbar-thumb,
.chat-box:hover::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, var(--scroll-thumb-hover), #3a3f5a);
}
.sidebar::-webkit-scrollbar-thumb:active,
.chat-box::-webkit-scrollbar-thumb:active{
  background: linear-gradient(180deg, var(--scroll-thumb-active), #4a5180);
}

/* 角落交會的方塊（避免突兀） */
.sidebar::-webkit-scrollbar-corner,
.chat-box::-webkit-scrollbar-corner{
  background: var(--scroll-track);
}

/* =========================================================
   Firefox Scrollbar
   =========================================================*/
.sidebar,
.chat-box{
  scrollbar-width: thin; /* 細 */
  scrollbar-color: var(--scroll-thumb) var(--scroll-track);
}
.sidebar:hover,
.chat-box:hover{
  scrollbar-color: var(--scroll-thumb-hover) var(--scroll-track);
}

/* ===== 視覺加分：捲動陰影提示（非必要） ===== */
/* 在聊天區頂/底加上內陰影，讓使用者感覺到可捲動 */
.chat-box{
  box-shadow:
    inset 0 8px 12px -10px rgba(0,0,0,.6),
    inset 0 -8px 12px -10px rgba(0,0,0,.6);
}

/* 停用時（例如未驗證/被封鎖）讓輸入列與滑輪狀態明確 */
.input-area input:disabled,
#sendBtn:disabled{
  opacity:.6;
  cursor:not-allowed;
}
