<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>載入中…</title>
  <link rel="icon" href="favicon.ico" />
  <style>
    body { background:#2c2f33; color:#fff; font-family:sans-serif; text-align:center; padding-top:100px; margin:0; }
  </style>
</head>
<body>
  <h1>Redirecting…</h1>


  <script type="module">
    import { auth } from './firebase.js';
    import { onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js';


    onAuthStateChanged(auth, (user) => {
      if (user) {
        window.location.replace('chat.html');
      } else {
        window.location.replace('login.html');
      }
    });


    setTimeout(async () => {
      try {
        const u = auth.currentUser;
        if (u) {
          window.location.replace('chat.html');
        } else {
          window.location.replace('login.html');
        }
      } catch (_) {
        window.location.replace('login.html');
      }
    }, 3000);
  </script>
</body>
</html>
